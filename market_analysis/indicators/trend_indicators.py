############################################################
# ðŸ“˜ æ–‡ä»¶è¯´æ˜Žï¼šè¶‹åŠ¿æŒ‡æ ‡
# æœ¬æ–‡ä»¶å®žçŽ°çš„åŠŸèƒ½ï¼šMAã€EMAã€ADXç­‰è¶‹åŠ¿ç±»æŒ‡æ ‡
#
# ðŸ“‹ ç¨‹åºæ•´ä½“ä¼ªä»£ç ï¼ˆä¸­æ–‡ï¼‰ï¼š
# 1. åˆå§‹åŒ–ä¾èµ–æ¨¡å—å’Œé…ç½®
# 2. å®šä¹‰æ ¸å¿ƒç±»å’Œå‡½æ•°
# 3. å®žçŽ°ä¸»è¦ä¸šåŠ¡é€»è¾‘
# 4. æä¾›å¯¹å¤–æŽ¥å£
# 5. å¼‚å¸¸å¤„ç†ä¸Žæ—¥å¿—è®°å½•
#
# ðŸ”„ ç¨‹åºæµç¨‹å›¾ï¼ˆé€»è¾‘æµï¼‰ï¼š
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚  è¾“å…¥æ•°æ®    â”‚
# â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
#        â†“
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚  æ ¸å¿ƒå¤„ç†é€»è¾‘ â”‚
# â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
#        â†“
# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚  è¾“å‡ºç»“æžœ    â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
#
# ðŸ“Š æ•°æ®ç®¡é“è¯´æ˜Žï¼š
# æ•°æ®æµå‘ï¼šäº¤æ˜“æ‰€API â†’ æ•°æ®å¤„ç† â†’ æŒ‡æ ‡è®¡ç®— â†’ åˆ†æžç»“æžœè¾“å‡º
#
# ðŸ§© æ–‡ä»¶ç»“æž„ï¼š
# - å‡½æ•°: add_trend_indicators
#
# ðŸ”— ä¸»è¦ä¾èµ–ï¼š__future__, pandas
#
# ðŸ•’ åˆ›å»ºæ—¶é—´ï¼š2025-12-18
############################################################

from __future__ import annotations

import pandas as pd


def add_trend_indicators(df: pd.DataFrame) -> pd.DataFrame:
    close = df["close"].astype(float)

    df["SMA_7"] = close.rolling(window=7).mean()
    df["SMA_20"] = close.rolling(window=20).mean()
    df["SMA_50"] = close.rolling(window=50).mean()

    df["EMA_12"] = close.ewm(span=12, adjust=False).mean()
    df["EMA_26"] = close.ewm(span=26, adjust=False).mean()

    df["MACD_Line"] = df["EMA_12"] - df["EMA_26"]
    df["Signal_Line"] = df["MACD_Line"].ewm(span=9, adjust=False).mean()
    df["MACD_Hist"] = df["MACD_Line"] - df["Signal_Line"]

    return df
