# 资源与环境变量（项目化配置清单）

> 本文档汇总 `任务.txt` 与 `.env.example` 中的配置项，用于开发/部署/排障的统一参考。  
> 安全要求：严禁将任何真实 Key/密码写入 Git；只放在本地 `.env` 或运行环境变量/密钥管理系统中。

## 1. 基础资源（来自 `任务.txt`）

- 云服务器：阿里云 ECS（Ubuntu 24.04 LTS）
- Docker：运行中
- 青龙：运行中（单 Worker Pipeline）
- Redis：Docker 容器，已启用 AUTH
  - 宿主端口：`26739`
  - 隧道映射：本地 `6379`

本地通过 SSH 隧道访问云端 Redis（示例）：

```bash
ssh -N -L 6379:127.0.0.1:26739 root@<ECS_IP>
```

## 2. 核心配置（必须）

### 2.1 交易所（建议先用测试网）

- `BINANCE_API_KEY`
- `BINANCE_SECRET_KEY`
- `USE_TESTNET=True`

### 2.2 日志与诊断

- `LOG_LEVEL=INFO|DEBUG|WARNING|ERROR`
- `LOG_DIR` / `LOG_FILE`
- `ENABLE_SMART_LOGGER=True|False`
- `ENABLE_SMART_CACHE=True|False`

## 3. LLM / 多模型（可选）

项目支持多家 LLM 提供商，常见变量（任选其一或多个）：

- OpenAI：`OPENAI_API_KEY` / `HEABL_OPENAI_KEY`、`OPENAI_MODEL`、`OPENAI_BASE_URL`
- DeepSeek：`DEEPSEEK_API_KEY` / `HEABL_DEEPSEEK_KEY`、`DEEPSEEK_MODEL`、`DEEPSEEK_BASE_URL`
- Gemini：`GEMINI_API_KEY` / `HEABL_GEMINI_KEY`、`GEMINI_MODEL`
- 其他：`HEABL_MOONSHOT_KEY` / `HEABL_GROQ_KEY` / `HEABL_ZHIPU_KEY` / `HEABL_DOUBAO_KEY` / `HEABL_COOLYEAH_KEY` 等

路由相关：

- `AI_TIMEOUT`
- `AI_DEFAULT_PROVIDER`
- `HEABL_LLM_DEFAULT`（或 `HEABL_LLM_PREFERENCE`）

## 4. 邮件通知（可选）

- `EMAIL_NOTIFICATIONS_ENABLED=True|False`
- `SENDER_EMAIL`
- `SENDER_PASSWORD`（或使用 `SMTP_PASS`）
- `RECIPIENT_EMAIL`（兼容 `RECEIVER_EMAIL` / `NOTIFY_EMAIL`）
- `SMTP_SERVER` / `SMTP_PORT`
- 细分开关：`NOTIFY_TRADE_EXECUTION` / `NOTIFY_PRICE_ALERTS` / `NOTIFY_DAILY_REPORT` / `NOTIFY_SYSTEM_ERRORS`

## 5. Redis 与 Cloud Pipeline（可选）

用于 `cloud/pipeline_worker.py`（队列/任务/通知）：

- `REDIS_URL`（优先）  
  或：
  - `REDIS_HOST`
  - `REDIS_PORT`
  - `REDIS_PASSWORD`（或 `REDIS_PASS`）
- `REDIS_SSL=True|False`

## 6. 其他通知通道（可选）

- Server酱：`SERVERCHAN_SENDKEY`
- 飞书：`FEISHU_WEBHOOK`、`FEISHU_SECRET`（可选签名）

## 7. 搜索（可选）

用于云端 Pipeline 检索/摘要：

- `HEABL_TAVILY_KEY`（或 `TAVILY_API_KEY`）

## 8. 注意事项

- `.env` 已在 `.gitignore` 中忽略：只提交 `.env.example`，不要提交 `.env`
- 推荐生产环境使用系统环境变量或密钥管理服务，避免把密钥落盘到仓库目录
